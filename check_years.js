const { PrismaClient } = require("@prisma/client"); const prisma = new PrismaClient(); async function main() { const sales = await prisma.sale.groupBy({ by: ["date"], _count: { id: true } }); const years = {}; sales.forEach(s => { const y = new Date(s.date).getFullYear(); years[y] = (years[y] || 0) + s._count.id; }); console.log(years); } main().catch(console.error).finally(() => prisma.$disconnect());
